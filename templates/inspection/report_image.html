{% extends "inspection/base.html" %}

{% block content %}
<div class="inspection-report image-format">
    <!-- –¢–æ–ª—å–∫–æ –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è -->
    <div class="header">
        <h1>–§–æ—Ç–æ–æ—Ç—á–µ—Ç –æ—Å–º–æ—Ç—Ä–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª—è</h1>
        <div class="vehicle-info">
            <div class="info-grid">
                <div><strong>–ú–æ–¥–µ–ª—å:</strong> {{ report_data.car_model }}</div>
                <div><strong>–ì–æ–¥:</strong> {{ report_data.car_year }}</div>
                <div><strong>VIN:</strong> {{ report_data.vin }}</div>
            </div>
        </div>
    </div>

    <!-- –ë–ª–æ–∫ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏ -->
    {% if report_data.images %}
    <div class="section">
        <div class="images-grid">
            {% for image in report_data.images %}
            <div class="image-item">
                <div class="image-container">
                    <img src="http://ci.encar.com{{ image.path }}" 
                         alt="–§–æ—Ç–æ –æ—Å–º–æ—Ç—Ä–∞" 
                         class="inspection-image"
                         loading="lazy"
                         onerror="this.style.display='none'">
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
    {% else %}
    <div class="section">
        <p class="no-images">–ù–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è</p>
    </div>
    {% endif %}

    <!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ -->
    <div class="controls">
        <button onclick="window.print()">üñ® –ü–µ—á–∞—Ç—å</button>
        <button onclick="window.close()">‚ùå –ó–∞–∫—Ä—ã—Ç—å</button>
    </div>
</div>

<style>
.images-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
    gap: 20px;
    margin: 20px 0;
}

.image-item {
    border: 1px solid #ddd;
    border-radius: 8px;
    padding: 15px;
    background: #fff;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.image-container {
    text-align: center;
}

.inspection-image {
    max-width: 100%;
    max-height: 500px;
    border-radius: 4px;
    border: 1px solid #eee;
}

.no-images {
    text-align: center;
    color: #666;
    font-style: italic;
    padding: 40px;
}
</style>
{% endblock %}
